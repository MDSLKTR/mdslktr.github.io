var DataWrapper=React.createClass({displayName:"DataWrapper",getInitialState:function(){return{skills:[],passives:[],stats:[],heroes:[],"class":{},name:{},level:{},paragon:{},polling:!0,isHidden:!1,url:"",constructedUrl:"",battleTag:"",apiKey:"?locale=en_GB&apikey=jrgy6zyyncxauzt2ub5m4f7zqg25fptm",profile:"https://eu.api.battle.net/d3/profile/",a:"https://eu.api.battle.net/d3/profile/Ferdi-1763/hero/44057278?locale=en_GB&apikey=jrgy6zyyncxauzt2ub5m4f7zqg25fptm"}},loadProfileData:function(){var a=this.state.profile.concat(this.state.battleTag,"/",this.state.apiKey);$.ajax({constructedUrl:a.toString(),dataType:"jsonp",success:function(a){this.setState({heroes:a.heroes}),console.log(this.state.heroes)}.bind(this),error:function(b,c,d){this.setState({battleTag:"invalid battletag"}),console.error(a,c,d.toString())}.bind(this)})},loadCommentsFromServer:function(){this.state.polling===!0&&($.ajax({url:this.state.url,dataType:"jsonp",success:function(a){this.setState({name:a.name}),this.setState({"class":a["class"]}),this.setState({level:a.level}),this.setState({paragon:a.paragonLevel}),this.setState({skills:a.skills.active}),this.setState({passives:a.skills.passive}),this.setState({stats:a.stats})}.bind(this),error:function(a,b,c){this.setState({url:"invalid api url"}),console.error(this.state.url,b,c.toString())}.bind(this)}),console.log("updated"))},componentWillMount:function(){this.loadCommentsFromServer(),setInterval(this.loadCommentsFromServer,this.props.pollInterval)},componentDidMount:function(){},handleChange:function(a){var b=a.target.value;this.setState({battleTag:b})},onEnter:function(){13===event.keyCode&&this.loadProfileData()},clearAndFocusInput:function(){this.setState({polling:!1}),this.setState({battleTag:""})},render:function(){var a=this.state.skills,b=[],c=this.state.passives,d=[],e=this.state.stats,f=[],g=this.state.name,h=this.state["class"],i=this.state.level,j=this.state.paragon,k=[],l=[];l="demon-hunter"===h?{backgroundImage:'url("/assets/images/dh.jpg")'}:"witch-doctor"===h?{backgroundImage:'url("/assets/images/wd.png")'}:{backgroundImage:'url("/assets/images/empty.svg")'},k.push(React.DOM.li({key:g.key},"Name: ",g)),k.push(React.DOM.li({key:h.key},"Class: ",h)),k.push(React.DOM.li({key:i.key+j.key},"Level: ",i)),k.push(React.DOM.li({key:j.key},"Paragon: ",j)),a.forEach(function(c){b.push(c.rune?React.DOM.li({key:a.key},c.skill.name," with ",c.rune.name):React.DOM.li({key:a.key},c.skill.name))}),c.forEach(function(a){d.push(React.DOM.li({key:c.key},a.skill.name))}),f.push(React.DOM.li({key:e.key},"Life: ",e.life)),f.push(React.DOM.li({key:e.key},"Damage: ",e.damage)),f.push(React.DOM.li({key:e.key},"Toughness: ",e.toughness));[e.strength,e.dexterity,e.intelligence];return"demon-hunter"===h?f.push(React.DOM.li({key:e.key},"Dexterity: ",e.dexterity)):"witch-doctor"===h?f.push(React.DOM.li({key:e.key},"Intelligence: ",e.intelligence)):"barbarian"===h?f.push(React.DOM.li({key:e.key},"Strength: ",e.strength)):console.log("new class?"),f.push(React.DOM.li({key:e.key},"Vitality: ",e.vitality)),React.DOM.div({className:"d3-container"},React.DOM.div({className:"d3-char-bg",key:h.key+"-image",style:l}),React.DOM.div({className:"d3-api-url",onClick:this.clearAndFocusInput},React.DOM.input({value:this.state.battleTag,onChange:this.handleChange,onKeyPress:this.onEnter})),React.DOM.div({className:"d3-data"},React.DOM.ul({className:"base"},k),React.DOM.ul({className:"skills"},b),React.DOM.ul({className:"passives"},d),React.DOM.ul({className:"stats"},f)))}});React.render(React.createElement(DataWrapper,{pollInterval:5e3}),document.getElementById("profile-data"));